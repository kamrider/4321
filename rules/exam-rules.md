# 考试系统问题清单

## API 调用问题
- [x] ExamDialog.vue 中使用了错误的 API 调用方式 (window.electron.exam)
- [x] 需要统一使用 window.ipcRenderer.exam

## 状态管理问题
- [ ] 考试完成后未正确设置 isGrading 状态
- [ ] 评分完成后未更新考试的最终状态
- [ ] 缺少考试结果统计（正确率等）
- [ ] 状态显示逻辑需要修改（待评分、评分中、已完成）
- [x] 完成考试时未正确更新所有题目状态
  - 问题：最后一题状态仍为 pending
  - 解决方案：
    1. 在 completeExam 中更新所有未完成题目为 completed
    2. 确保 currentIndex 等于题目总数
    3. 设置未答题的 timeSpent 为 0

## 评分系统问题
- [ ] 评分时需要同时更新训练记录
- [ ] 需要添加评分进度显示
- [ ] 需要添加评分结果统计
- [ ] GradingDialog 中的评分逻辑需要完善

## 功能缺失
- [ ] 缺少考试详情页面
- [ ] 继续考试功能未实现
- [ ] 考试中断恢复机制未实现

## 数据统计
- [ ] 缺少考试正确率统计
- [ ] 缺少考试用时统计
- [ ] 缺少历史考试数据分析

## UI/UX 优化
- [ ] 评分界面需要优化
- [ ] 考试状态显示需要优化
- [ ] 需要添加考试进度提示

## 数据一致性问题
- [x] 完成考试时出现重复记录
  - 原因：completeExam 方法创建新记录但未删除旧记录
  - 解决方案：
    1. 在 completeExam 中先删除 ongoing 状态的文件
    2. 再保存 completed 状态的文件
    3. 确保文件移动/删除操作的原子性 
- [x] 考试时间计算不准确
  - 问题：
    1. 题目实际用时计算错误
    2. 总用时累加方式不正确
    3. 快速完成考试时总时间异常
  - 解决方案：
    1. 修改 nextQuestion 中的时间计算逻辑
    2. 在 completeExam 中正确计算总用时
    3. 使用 timeLimit - time.value 计算实际用时 